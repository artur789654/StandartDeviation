#include <iostream>
#include <fstream>
#include <string>
#include <math.h>
using namespace std;
const int N = 10;
void makeMas(double masNum[N]) {
	int i = 0,l=0;
	
	ifstream dani("dani.txt");
	if (!dani) {
		cout << "Error\n";
		exit(1);
	}
	while (!dani.eof()) {
		
		dani >> masNum[i];
		i++;
	}
	
	

}
double serArith(double masNum[N],double arAverage) {
	for (int j = 0; j < N; j++) {
		arAverage += masNum[j];

	}
	arAverage = arAverage / N;
	return arAverage;

}
void newMass(double newMas[N], double masNum[N],double res) {
	for (int i = 0; i < N; i++) {
		newMas[i] = masNum[i] - res;

	}

}
double sumEl(double newMas[N],double sum) {
	for (int l = 0; l < N; l++) {
		sum += pow(newMas[l], 2);
	}
	return sum;

}
void main() {
	//1.Реєстрація
	int quest;
	double *masNum = new double[N];
	double *newMas = new double[N];
	double arAverage = 0;
	double sum = 0;
	double sigma = 0;
	string pass,pass1;
	string password;
	string yourValue;
	ofstream out;
	ofstream standart;
	cout << "Use our program like registered person or like quest? If yes - type 1,if not - type 0,if dont wont to use-another number" << endl;
	cin >> quest;
	if (quest == 1) {
			out.open("Reg.txt", ofstream::out | ofstream::app);
			cout << "Registration:\n" << "Type your password:";
			cin >> pass;
			cout << "Grats.You are registered!" << endl;
			out << pass << endl;
			out.close();
			
		//2.Авторизація
			ifstream in("Reg.txt");
			cout << "Authorization\n-----------------" << endl;
			cout << "Password:";
			cin >> yourValue;
			cout << "\n";
			while (getline(in, password)) {
				if (yourValue == password) {
					int times;
					cout << "Type how many times you want to use our program:" << endl;
					cin >> times;
					for (int i = 0; i < times; i++) {
						makeMas(masNum);
						serArith(masNum, arAverage);
						double res = serArith(masNum, arAverage);
						newMass(newMas, masNum, res);
						sum = sumEl(newMas, sum);
						sigma = sqrt(sum / N);
						standart.open("sigma.txt", std::ofstream::out | std::ofstream::app);
						standart << sigma << "\n-----" << endl;
						standart.close();
						cout << "Success.Your sigma is in fail" << endl;
					}
				}
			}
			in.close();
		
	}
	else if(quest==0){
		cout << "You are not registered,but you can use our program one time" << endl;
		makeMas(masNum);
		serArith(masNum, arAverage);
		double res = serArith(masNum, arAverage);
		newMass(newMas, masNum, res);
		sum = sumEl(newMas, sum);
		sigma = sqrt(sum / N);
		standart.open("sigma.txt", std::ofstream::out | std::ofstream::app);
		standart << sigma<<"\n-----"<< endl;
		standart.close();
		cout << "Success.Your sigma is in fail" << endl;
	}
	else {
		exit(0);
	}
	system("pause");
}
